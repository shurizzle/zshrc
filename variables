# vim: set ft=zsh

export HOSTTYPE="$(uname -m)"
export LD_LIBRARY_PATH="/usr/lib:/usr/local/lib:."

if is-command bc; then
  BC_ENV_ARGS="-l"
  if [ -f ~/.bcrc ]; then
    BC_ENV_ARGS="$BC_ENV_ARGS $HOME/.bcrc"
  fi

  export BC_ENV_ARGS
fi

is-command rustc && function {
  local VERSION="$(rustc --version | cut -d' ' -f2)"

  if [[ "$VERSION" = *-nightly ]]; then
    export CFG_RELEASE_CHANNEL=nightly
    export CFG_RELEASE="$VERSION"
  else
    export CFG_RELEASE_CHANNEL=stable
    export CFG_RELEASE="$VERSION"
  fi
}

if is-command nvim; then
  export EDITOR=nvim
elif is-command vim; then
  export EDITOR=vim
elif is-command vi; then
  export EDITOR=vi
fi

if [ -z "$MANPATH" ]; then
  if (( $+commands[manpath] )); then
    MANPATH="$(manpath)"
  else
    MANPATH="/usr/share/man:/usr/X11R6/man:/usr/local/man"
  fi
fi
export MANPATH="${MANPATH:+$MANPATH:}${NPM_PACKAGES}/share/man"

if is-command nvimpager; then
  export PAGER=nvimpager
elif is-command less; then
  export PAGER=less
elif is-command more; then
  export PAGER=more
fi

if [ -d ~/.ghcup/bin ]; then
  PATH="$HOME/.ghcup/bin:$PATH"
fi

export RUBY_YJIT_ENABLE=1
